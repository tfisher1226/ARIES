<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"	
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:aries="http://aries.org/jsf">

	<c:if test="#{empty href}">
		<c:set var="href" value="#" /> 
	</c:if>
	
	<c:if test="#{empty rendered}">
		<c:set var="rendered" value="true" /> 
	</c:if>
	
	<c:if test="#{empty fontSize}">
		<c:set var="fontSize" value="#{userSkin.fontSize}" /> 
	</c:if>
	
	<c:if test="#{empty fontWeight}">
		<c:set var="fontWeight" value="#{userSkin.fontWeight}" /> 
	</c:if>
				
	<c:if test="#{empty fontStyle}">
		<c:set var="fontStyle" value="#{userSkin.fontStyle}" /> 
	</c:if>
				
	<c:if test="#{empty fontFamily}">
		<c:set var="fontFamily" value="#{userSkin.fontFamily}" /> 
	</c:if>
	
	<c:if test="#{empty linkColor}">
		<c:set var="linkColor" value="#{userSkin.linkColor}" /> 
	</c:if>
	
	<c:set var="textSettings" value="font-size: #{helper.convert(fontSize)}; font-weight: #{fontWeight}; font-style: #{fontStyle}; font-family: #{fontFamily}; color: #{linkColor}" /> 
	
	<a4j:outputPanel
		id="#{id}Pane"
		rendered="#{rendered}">

		<c:choose>
			<c:when test="#{not empty manager and not empty action}">
				<a4j:commandLink
					value="#{value}"
					immediate="true"
		 			bypassUpdates="true"
					execute="@this"
					action="#{manager[action]}"
					onclick="#{onclick}"
					onbegin="#{onbegin}"
					onmouseup="#{onmouseup}" 
					onmousedown="#{onmousedown}"
					onmouseout="#{onmouseout}"  
					oncomplete="#{oncomplete}"
					oncompleteXXX="alert('#{oncomplete}'); #{oncomplete}"
					style="#{textSettings}">
					<a4j:param assignTo="#{manager.itemId}" name="itemId" value="#{dropPaneId}" />
				</a4j:commandLink>
			</c:when>
		
			<c:otherwise>
				<a id="#{id}"
					href="#{href}"
					onclick="#{onclick}"
					onmouseup="#{onmouseup}" 
					onmousedown="#{onmousedown}" 
					onmouseout="#{onmouseout}" 
					style="#{paddingSettings}; #{textSettings}; background-color: inherit">#{value}</a>
			</c:otherwise>
		</c:choose>
	</a4j:outputPanel>
</ui:composition>
