<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"	
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:aries="http://aries.org/jsf">

    <a4j:jsFunction 
    	name="#{type}ToggleVisibility" 
    	execute="@this"
    	immediate="true"
    	bypassUpdates="true"
    	action="#{manager.toggleVisible}"
		onbegin="">
    </a4j:jsFunction>
	    
	<rich:collapsiblePanel 
		header="#{label}" 
		switchType="client"
		expanded="#{manager.visible}"
		rendered="#{manager.dataModel.rowCount == 0}"
		leftCollapsedIcon="xx"
		leftExpandedIcon="xx"
		headerClass="collapsiblePanelHeader"
		styleClass=""
		title="title"
		bodyClass=""
		onswitch="#{type}ToggleVisibility()"
		toggleListenerXX="#{manager.toggle}"
		style="padding: 0px; background-color: inherit">
	
		<f:facet name="headerExpanded">
			<aries:formPane 
				width="auto"
				columns="2" 
				columnClass="formColumnAlignTop"
				backgroundColor="inherit"
				style="">
		
				<h:graphicImage library="graphics" width="18" height="18" name="/icons/arrow/ArrowDown15.gif" />
	
				<h:panelGroup layout="block" style="margin-top: 0px; margin-left: 0px; background-color: inherit">
					<h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="border-collapse: collapse">

						<h:graphicImage library="graphics" width="18" height="18" name="#{icon}" style="margin-left: 2px" />
		
						<h:panelGroup layout="block" style="margin-top: 2px; margin-left: 6px; background-color: inherit">
							<aries:text fontSize="13" value="#{label}" />
						</h:panelGroup>
					</h:panelGrid>
				
					<aries:spacer height="6" />
					<h:panelGroup layout="block" styleClass="tableBorder" style="border-right-width: 0px">
						<ui:include src="#{table}" />
					</h:panelGroup>
				</h:panelGroup>
			</aries:formPane>
		</f:facet>
		
		<f:facet name="headerCollapsed">
			<aries:formPane 
				width="auto"
				columns="3" 
				columnClass="formColumnAlignTop"
				backgroundColor="inherit"
				style="">
		
				<h:graphicImage library="graphics" width="18" height="18" name="/icons/arrow/ArrowRight15.gif" />

				<h:graphicImage library="graphics" width="18" height="18" name="#{icon}" style="margin-left: 2px" />

				<h:panelGroup layout="block" style="margin-top: 2px; margin-left: 6px; background-color: inherit">
					<aries:text fontSize="13" value="#{label}" />
				</h:panelGroup>
			</aries:formPane>
		</f:facet>
	</rich:collapsiblePanel>
</ui:composition>
