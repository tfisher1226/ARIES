<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"	
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:s="http://jboss.com/schema/seam/taglib"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:aries="http://aries.org/jsf">

	    <a4j:jsFunction 
	    	name="initializeGlobals" 
	    	immediate="true" 
	    	execute="@this" 
	    	limitRender="true"
	    	renderXX="gMap">
			<a4j:param name="w" value="windowWidth" assignTo="#{globals.screenWidth}" noEscape="true"/>
			<a4j:param name="h" value="windowHeight" assignTo="#{globals.screenHeight}" noEscape="true"/>
			<a4j:param name="bn" value="browserName" assignTo="#{globals.browserName}" noEscape="true"/>
			<a4j:param name="bv" value="browserVersion" assignTo="#{globals.browserVersion}" noEscape="true"/>
		</a4j:jsFunction>

	    <a4j:jsFunction 
	    	name="waitCursor" 
	    	execute="@this"
	    	immediate="true"
	    	limitRender="true"
	    	bypassUpdates="true"		    	
	    	oncomplete="setCursorWait(#{rich:element(name)})">
	        <a4j:param name="name" assignTo="#{name}"/> 
	    </a4j:jsFunction>

	    <a4j:jsFunction 
	    	name="defaultCursor"
	    	execute="@this"
	    	immediate="true"
	    	limitRender="true"
	    	bypassUpdates="true"		    	
	    	oncomplete="setCursorDefault(#{rich:element(name)})">
	        <a4j:param name="name" assignTo="#{name}"/> 
	    </a4j:jsFunction>

	<a4j:region>
	    <a4j:jsFunction 
	    	name="logout" 
	    	execute="@this"
	    	immediate="true"
	    	limitRender="true"
	    	bypassUpdates="true"
	    	action="#{identity.logout}"
	    	onbegin="/*location.href='http://'+location.host+'/infosgi/login.seam'; showPage('http://localhost:8080/infosgi/login.seam')*/"
	    	oncomplete=""
	    	render="">
	    </a4j:jsFunction>
	</a4j:region>
	
	<a4j:region>
		<a4j:jsFunction
	    	name="saveUserAction"
	    	execute="@this"
	    	immediate="true"
	    	bypassUpdates="true"
	    	limitRender="true"
	    	action="#{activityManager.saveAction()}"
			onbegin="">
			<a4j:param name="actionName" assignTo="#{activityManager.actionName}" />
		</a4j:jsFunction>
	</a4j:region>
</ui:composition>
