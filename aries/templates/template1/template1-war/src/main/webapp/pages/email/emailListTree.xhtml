<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"	
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:aries="http://aries.org/jsf">

	<a4j:outputPanel id="emailTreePanel">
		<rich:panel bodyClass="scrolledPanelBody">

			<rich:tree id="emailTree"
				var="item"
				nodeFace="#{item.level}"
				value="#{emailManager.rootNode}" 
				switchType="client" 
				ajaxKeys="#{null}"
				requestDelay="0"
				rendered="true"
				immediate="true"
				ajaxSingle="true"
				ajaxSubmitSelection="true"
				rightClickSelection="true"
				adviseNodeOpened="#{emailManager.adviseNodeOpened}"
				adviseNodeSelected="#{emailManager.adviseNodeSelected}"
				nodeSelectListener="#{emailManager.processSelection}"
				highlightedClass="emailTreeHighlighted"
				selectedClass="emailTreeSeleceted"
				styleClass=""
				style="height: #{globals.screenHeight-270}px; padding-top: 4px; margin: 0px; background-color: #fff; border: 0px solid #ccc; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none">

	            <rich:treeNode 
	            	type="ZONE"
	            	ondblclick="setCursorWait(this); showProgress('#{item.name}', 'Retrieving information...'); viewMembers()"
	            	style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none">
	            	<div class="vspace2">
		                <h:outputText value="#{item.name}" style="font-size: 11px; font-weight: normal"/>
	                </div>
					<rich:componentControl event="onContextMenu" for="zoneContextMenu" operation="show"/>
					<ui:include src="organizationListMenu.xhtml">
						<ui:param name="organizationContextMenuId" value="zoneContextMenu"/>
					</ui:include>
	            </rich:treeNode>
	            
	            <rich:treeNode 
	            	type="REGION"
	            	ondblclick="setCursorWait(this); showProgress('#{item.name}', 'Retrieving information...'); viewMembers()"
	            	style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none">
	            	<div class="vspace2">
		                <h:outputText value="#{item.name}" style="font-size: 11px; font-weight: normal"/>
	                </div>
					<rich:componentControl event="onContextMenu" for="regionContextMenu" operation="show"/>
					<ui:include src="organizationListMenu.xhtml">
						<ui:param name="organizationContextMenuId" value="regionContextMenu"/>
					</ui:include>
	            </rich:treeNode>
	            
	            <rich:treeNode 
	            	type="AREA"
	            	ondblclick="setCursorWait(this); showProgress('#{item.name}', 'Retrieving information...'); viewMembers()"
	            	style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none">
	            	<div class="vspace2">
		                <h:outputText value="#{item.name}" style="font-size: 11px; font-weight: normal"/>
	                </div>
					<rich:componentControl event="onContextMenu" for="areaContextMenu" operation="show"/>
					<ui:include src="organizationListMenu.xhtml">
						<ui:param name="organizationContextMenuId" value="areaContextMenu"/>
					</ui:include>
	            </rich:treeNode>
	            
	            <rich:treeNode 
	            	type="CHAPTER"
	            	ondblclick="setCursorWait(this); showProgress('#{item.name}', 'Retrieving information...'); viewMembers()"
	            	style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none">
	            	<div class="vspace2">
		                <h:outputText value="#{item.name}" style="font-size: 11px; font-weight: normal"/>
	                </div>
					<rich:componentControl event="onContextMenu" for="chapterContextMenu" operation="show"/>
					<ui:include src="organizationListMenu.xhtml">
						<ui:param name="organizationContextMenuId" value="chapterContextMenu"/>
					</ui:include>
	            </rich:treeNode>
	
	            <rich:treeNode 
	            	type="DISTRICT"
	            	requestDelay="5000"
	            	icon="resource://images/icons/common/HelpFile16.gif"
	            	iconLeaf="resource://images/icons/common/HelpFile16.gif"
	            	ondblclick="setCursorWait(this); showProgress('#{item.name}', 'Retrieving information...'); viewMembers()"
	            	style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none; text-decoration: none">
	            	<div class="vspace2">
		                <h:outputText value="#{item.name}" style="font-size: 11px; font-weight: normal"/>
	                </div>
					<rich:componentControl event="onContextMenu" for="districtContextMenu" operation="show"/>
					<ui:include src="organizationListMenu.xhtml">
						<ui:param name="organizationContextMenuId" value="districtContextMenu"/>
					</ui:include>
					<!-- 
					disableDefault="true" 
					-->
				</rich:treeNode>

	            <rich:treeNode 
	            	type="GROUP"
	            	ondblclick="setCursorWait(this); showProgress('#{item.name}', 'Retrieving information...'); viewMembers()"
	            	style="-webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -o-user-select: none">
	            	<div class="vspace2">
		                <h:outputText value="#{item.name}" style="font-size: 11px; font-weight: normal"/>
	                </div>
					<rich:componentControl event="onContextMenu" for="groupContextMenu" operation="show"/>
					<ui:include src="organizationListMenu.xhtml">
						<ui:param name="organizationContextMenuId" value="groupContextMenu"/>
					</ui:include>
	            </rich:treeNode>
			</rich:tree>
		</rich:panel>

		<div style="width: 100%; height: 10px; margin-right: 0px; background-color: #ccc"/>
	</a4j:outputPanel>
</ui:composition>
