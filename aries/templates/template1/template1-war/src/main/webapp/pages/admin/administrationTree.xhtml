<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"	
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:aries="http://aries.org/jsf">

 	<a4j:outputPanel id="administrationTreePanel">
		<h:panelGroup layout="block">
			<rich:panel bodyClass="domainPanelBody" style="height: #{screenHeight-200}px">
	
				<a4j:region>
					<rich:tree 
						var="item"
						id="administrationTree"
						value="#{administrationTreeRootNode}" 
						nodeFace="#{item.type}"
						switchType="client" 
						ajaxKeys="#{null}"
						requestDelay="0"
						immediate="true"
						ajaxSingle="true"
						bypassUpdates="true"
						ajaxSubmitSelection="true"
						rightClickSelection="true"
						showConnectingLines="false"
						adviseNodeOpened="#{administrationTreeManager.adviseNodeOpened}"
						adviseNodeSelected="#{administrationTreeManager.adviseNodeSelected}"
						nodeSelectListener="#{administrationTreeManager.nodeSelected}"
						highlightedClass="treeNodeHighlighted"
						selectedClass="treeNodeSelected"
						styleClass="tree">
				
						<!--  
						<a4j:support
							eventsQueue="org.richfaces.queue.global"
							event="oncontextmenu" 
							immediate="true"
							ajaxSingle="true"
							requestDelay="1000"
							bypassUpdates="true"
							onsubmit="showOrganizationContextMenu(event)">
						</a4j:support>
						onselected="showOrganizationContextMenu(event)"
						<rich:componentControl event="oncontextmenu" for="adminContextMenu" operation="show">
							<f:param value="#{item.label}" name="adminName" />
						</rich:componentControl>
						-->

						<ui:include src="administrationTreeNodes.xhtml">
							<ui:param name="ondblclick" value="setCursorWait(this); showProgress('#{item.label}', 'Retrieving information...');"/>
						</ui:include>
					</rich:tree>
				</a4j:region>
			</rich:panel>
		</h:panelGroup>
	</a4j:outputPanel>
</ui:composition>
