<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"	
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:s="http://jboss.com/schema/seam/taglib"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:aries="http://aries.org/jsf">

	<aries:tag>
		<!--  
		<h:outputStylesheet library="styles" name="dialog.ecss"/>
		<h:outputStylesheet library="styles" name="widget.ecss"/>
		-->
	
		<c:if test="#{empty dialogKey}">
			<c:set var="dialogKey" value="Upload"/> 
			<c:set var="dialog" value="uploadDialog"/> 
		</c:if>
	
		<c:if test="#{not empty dialogKey}">
			<c:set var="dialog" value="#{dialogKey}UploadDialog"/> 
		</c:if>
	
		<script type="text/javascript">
		function showUploadDialog() {#{rich:component(dialog)}.show()}
		function hideUploadDialog() {#{rich:component(dialog)}.hide()}
		</script>
	
	
		<!-- File Upload Dialog -->
		<rich:popupPanel 
			id="#{dialog}"
			autosized="true" 
			resizeable="false"
			keepVisualState="true"
			domElementAttachment="form"
			styleClass="dialog"
			style="">
	
			<!-- TITLE -->
			<aries:dialogHeaderBar 
				title="File Upload"
				heading="File Upload" />
				
			<!-- CONTENT -->
			<h:form id="#{dialog}Form" enctype="multipart/form-data">
				<h:panelGroup layout="block" styleClass="layoutPane" style="background-color: inherit">
					<h:panelGroup layout="block" style="margin: 8px 10px"> 
						<ui:include src="uploadPanel.xhtml"/>
					</h:panelGroup>
				</h:panelGroup>
				
				<aries:spacer height="8"/>
				<h:panelGrid layout="block" columns="1" columnClasses="formColumn" style="width: 100%">
					<ui:include src="uploadControl.xhtml"/>
				</h:panelGrid>
			</h:form>
		</rich:popupPanel>
	</aries:tag>
</ui:composition>
